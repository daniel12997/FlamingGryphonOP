<!-- ABOUTME: Person detail page for the Order of Precedence. -->
<!-- ABOUTME: Shows SCA name, mundane name, alternate names, bestowals, and registration info. -->
{% extends "base.html" %}

{% block title %}{{ recipient.sca_name }} â€” Order of Precedence{% endblock %}

{% block content %}
<h1>{{ recipient.sca_name }}</h1>

{% if recipient.mundane_name %}
<p><strong>Mundane name:</strong> {{ recipient.mundane_name }}</p>
{% endif %}

{% if recipient.group %}
<p><strong>Group:</strong> {{ recipient.group }}</p>
{% endif %}

{% if alternate_names %}
<h2>Alternate Names</h2>
<ul>
    {% for alt in alternate_names %}
    <li>
        {{ alt.name }}
        {% if alt.is_nickname %}<small>(nickname)</small>{% endif %}
        {% if alt.is_former_name %}<small>(former name)</small>{% endif %}
        {% if alt.is_registered %}<small>(registered)</small>{% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}

{% if bestowals %}
<h2>Awards</h2>
<table>
    <thead>
        <tr>
            <th>Date</th>
            <th>Honor</th>
            <th>Event</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody>
        {% for b in bestowals %}
        <tr>
            <td>{{ b.display_date|default:b.sort_date|default:"Unknown" }}</td>
            <td>{{ b.honor }}</td>
            <td>{{ b.event_name|default:b.event|default:"" }}</td>
            <td>{{ b.notes }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}

<h2>Registration</h2>
<dl>
    <dt>Name registered</dt>
    <dd>{{ recipient.name_registered|yesno:"Yes,No" }}</dd>
    <dt>Device registered</dt>
    <dd>{{ recipient.device_registered|yesno:"Yes,No" }}</dd>
    {% if recipient.device_blazon %}
    <dt>Device blazon</dt>
    <dd>{{ recipient.device_blazon }}</dd>
    {% endif %}
</dl>

<p><strong>Status:</strong> {{ recipient.active|yesno:"Active,Inactive" }}</p>

{% if user.is_authenticated %}
<div role="group">
    <a href="{% url 'op:recipient_update' recipient.pk %}" role="button">Edit Recipient</a>
    <a href="{% url 'op:bestowal_create' %}?recipient={{ recipient.pk }}" role="button" class="secondary">Add Award</a>
</div>
{% endif %}
{% endblock %}
