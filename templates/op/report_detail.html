<!-- ABOUTME: Admin-only report detail page with status/resolution management. -->
<!-- ABOUTME: Shows full report info and allows updating status and adding resolution. -->
{% extends "base.html" %}

{% block title %}Report: {{ report.subject }} â€” Order of Precedence{% endblock %}

{% block content %}
<h1>Report: {{ report.subject }}</h1>

<dl>
    <dt>Status</dt>
    <dd>{{ report.get_status_display }}</dd>
    <dt>Created</dt>
    <dd>{{ report.created_date }}</dd>
    <dt>Last Updated</dt>
    <dd>{{ report.last_updated }}</dd>
</dl>

<h2>Reporter</h2>
{% if report.legacy_reporter_sca_name %}
<p>
    <strong>{{ report.legacy_reporter_sca_name }}</strong>
    {% if report.legacy_reporter_email %}({{ report.legacy_reporter_email }}){% endif %}
    <small>(imported from legacy data)</small>
</p>
{% else %}
<p>{{ report.reporter.sca_name|default:report.reporter.username }}
    ({{ report.reporter.email|default:"no email" }})</p>
{% endif %}

<h2>Description</h2>
<blockquote>{{ report.description }}</blockquote>

{% if report.resolution %}
<h2>Resolution</h2>
<blockquote>{{ report.resolution }}</blockquote>
{% endif %}

<h2>Update Status</h2>
<form method="post" action="{% url 'op:report_update_status' report.pk %}">
    {% csrf_token %}
    {% for field in status_form %}
    <label for="{{ field.id_for_label }}">
        {{ field.label }}
        {{ field }}
    </label>
    {% endfor %}
    <button type="submit">Update Status</button>
</form>

<p><a href="{% url 'op:report_list' %}">Back to Reports</a></p>
{% endblock %}
